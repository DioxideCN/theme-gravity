<div th:fragment="page(pageInfo, totalPages, pageKey)" class="pagination">
    <ul class="pagination-list">
        <th:block th:if="${pageInfo.page > 3}">
            <a class="page-number" 
                th:unless="${#strings.equals(pageKey, 'post')}"
                data-page-number="1" 
                th:data-page-key="${pageKey}" 
                th:text="1"
                href="/pageKey"></a>
            <a class="page-number" 
                th:if="${#strings.equals(pageKey, 'post')}"
                data-page-number="1" 
                th:data-page-key="${pageKey}" 
                th:text="1"></a>
            <span class="space" th:if="${pageInfo.page != 4}">…</span>
        </th:block>

        <th:block th:each="index:${#numbers.sequence(pageInfo.page-2, pageInfo.page+2)}">
            <li th:if="${pageInfo.page} == ${index}">
                <a class="pagination-link is-current" th:text="${pageInfo.page}"></a>
            </li>
            <li th:unless="${pageInfo.page == index}" th:if="${index > 0 && index <= totalPages}">
                <a class="pagination-link" 
                    th:unless="${#strings.equals(pageKey, 'post')}"
                    th:data-page-number="${index}" 
                    th:data-page-key="${pageKey}" 
                    th:text="${index}"
                    th:href="${'/' + pageKey + '/page/' + index}"></a>
                <a class="pagination-link" 
                    th:if="${#strings.equals(pageKey, 'post')}"
                    th:data-page-number="${index}" 
                    th:data-page-key="${pageKey}" 
                    th:text="${index}"></a>
            </li>
        </th:block>

        <th:block th:if="${totalPages - pageInfo.page > 2}">
            <li th:if="${totalPages - pageInfo.page != 3}">
                <span class="pagination-ellipsis">…</span>
            </li>
            <li>
                <a class="pagination-link" 
                    th:unless="${#strings.equals(pageKey, 'post')}"
                    th:text="${totalPages}" 
                    th:data-page-number="${totalPages}" 
                    th:data-page-key="${pageKey}"
                    th:href="${'/' + pageKey + '/page/' + totalPages}"></a>
                <a class="pagination-link" 
                    th:if="${#strings.equals(pageKey, 'post')}"
                    th:text="${totalPages}" 
                    th:data-page-number="${totalPages}" 
                    th:data-page-key="${pageKey}"></a>
            </li>
        </th:block>
    </ul>
</div>