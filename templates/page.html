<!DOCTYPE html>
<!-- 关于 -->
<th:block th:if="${#strings.equals(singlePage.spec.slug, 'about')}">
<html xmlns:th="https://www.thymeleaf.org"
    th:replace="~{layout :: html(head = ~{about::head},title = ${singlePage.spec.title} + ' ｜ ' + ${site.title}, content = ~{about::content}, bannerSection = ~{modules/banner::banner-about}, err = false)}">
</html>
</th:block>

<!-- 活动 -->
<th:block th:if="${#strings.equals(singlePage.spec.slug, 'activity')}">
<html xmlns:th="https://www.thymeleaf.org"
    th:replace="~{layout :: html(head = ~{activity::head},title = ${singlePage.spec.title} + ' ｜ ' + ${site.title}, content = ~{activity::content}, bannerSection = ~{modules/banner::banner-worm}, err = false)}">
</html>
</th:block>

<!-- 其它独立页面 -->
<th:block th:if="${!#strings.equals(singlePage.spec.slug, 'about') && !#strings.equals(singlePage.spec.slug, 'activity') && !#strings.equals(singlePage.spec.slug, 'directory')}">
<html xmlns:th="https://www.thymeleaf.org"
    th:replace="~{layout :: html(head = ~{::head},title = ${singlePage.spec.title} + ' ｜ ' + ${site.title}, content = ~{::content}, bannerSection = ~{modules/banner::banner-default}, err = false)}">

<th:block th:fragment="head">
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@3.0/dist/browser/styles/disqusjs.css">
</th:block>

<th:block th:fragment="content">
    <div class="content">
        <div class="post_page">
            <div class="post animated fadeInDown">
                <div class="post_title post_detail_title">
                    <h2 th:text="${singlePage.spec.title}"></h2>
                    <div class="post_tags">
                        发布于
                        <time th:attr="datetime=${#dates.format(singlePage.spec.publishTime, 'yyyy-MM-dd')}"
                            th:text="${#dates.format(singlePage.spec.publishTime,'yyyy年MM月dd日')}"
                            th:title="${#dates.format(singlePage.spec.publishTime,'yyyy-MM-dd')}"></time>
                        <spam class="post_tags_devider">|</spam>
                        <span th:text="${singlePage.stats.visit}"></span> 次浏览
                    </div>
                </div>
                <div class="post_content markdown" th:utext="${'true'.equals(singlePage.metadata.annotations.get('need-raw'))?singlePage.content.raw:singlePage.content.content}"></div>
            </div>
        </div>
        <giscus-widget
        id="comments"
        th:if="${singlePage.spec.allowComment}"
        th:attr="lang=${theme.config.cmt.data_lang}
            ,repo=${theme.config.cmt.data_repo}
            ,repoid=${theme.config.cmt.data_repo_id}
            ,mapping=${theme.config.cmt.data_mapping.which_one}
            ,data-term=(${theme.config.cmt.data_mapping.disc_id}?${theme.config.cmt.data_mapping.disc_id}:(${theme.config.cmt.data_mapping.specific_title}?${theme.config.cmt.data_mapping.specific_title}:''))
            ,strict=(${theme.config.cmt.data_strict}?'1':'0')
            ,category=(${theme.config.cmt.data_scanning}?${theme.config.cmt.data_category}:'')
            ,categoryid=${theme.config.cmt.data_category_id}
            ,reactionsenabled=(${theme.config.cmt.data_feature.data_reactions_enabled}?'1':'0')
            ,emitmetadata=(${theme.config.cmt.data_feature.data_emit_metadata}?'1':'0')
            ,inputposition=(${theme.config.cmt.data_feature.data_input_position}?'top':'bottom')
            ,theme=${theme.config.cmt.data_theme.data_theme_light}
            ,loading=(${theme.config.cmt.data_feature.data_loading}?'lazy':'')"
        crossorigin="anonymous"
        async
        ></giscus-widget>
    </div>
</th:block>

</html>
</th:block>
