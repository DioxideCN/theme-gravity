function t(t){var e,n,r,a,i=[],o=[],l=Math.max,s=Math.min,c=Math.abs,u=Math.ceil,d=/^[0-9]*$/,v=/^[A-Z0-9 $%*+.\/:-]*$/,f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",m=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],h=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],p={L:[0,1],M:[1,0],Q:[2,3],H:[3,2]},g=function(t,e){for(var n=0,r=8;r--;)n=n<<1^285*(n>>>7)^(e>>>r&1)*t;return n},b=function(t,e){for(var n=[],r=t.length,a=r;a;)for(var i=t[r-a--]^n.shift(),o=e.length;o--;)n[o]^=g(e[o],i);return n},$=function(t){for(var e=[function(){return 0==(n+r)%2},function(){return 0==n%2},function(){return 0==r%3},function(){return 0==(n+r)%3},function(){return 0==((n/2|0)+(r/3|0))%2},function(){return 0==n*r%2+n*r%3},function(){return 0==(n*r%2+n*r%3)%2},function(){return 0==((n+r)%2+n*r%3)%2}][t],n=a;n--;)for(var r=a;r--;)o[n][r]||(i[n][r]^=e())},y=function(){for(var t=function(t,e){e[6]||(t+=a),e.shift(),e.push(t)},e=function(e,r,i){return e&&(t(r,i),r=0),t(r+=a,i),n(i)},n=function(t){var e=t[5],n=e>0&&t[4]==e&&t[3]==3*e&&t[2]==e&&t[1]==e;return(n&&t[6]>=4*e&&t[0]>=e?1:0)+(n&&t[0]>=4*e&&t[6]>=e?1:0)},r=0,o=a*a,l=0,s=a;s--;){for(var d=[0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0],f=!1,m=!1,h=0,p=0,g=a;g--;){i[s][g]==f?5==++h?r+=3:h>5&&r++:(t(h,d),r+=40*n(d),h=1,f=i[s][g]),i[g][s]==m?5==++p?r+=3:p>5&&r++:(t(p,v),r+=40*n(v),p=1,m=i[g][s]);var b=i[s][g];b&&l++,g&&s&&b==i[s][g-1]&&b==i[s-1][g]&&b==i[s-1][g-1]&&(r+=3)}r+=40*e(f,h,d)+40*e(m,p,v)}return r+10*(u(c(20*l-10*o)/o)-1)},w=function(t,e,n){for(;e--;)n.push(t>>>e&1)},x=function(t,e){return t.numBitsCharCount[(e+7)/17|0]},_=function(t,e){return 0!=(t>>>e&1)},C=function(t,e){for(var n=0,r=t.length;r--;){var a=t[r],i=x(a,e);if(1<<i<=a.numChars)return 1/0;n+=4+i+a.bitData.length}return n},k=function(t){if(t<1||t>40)throw"Version number out of range";var e=(16*t+128)*t+64;if(t>=2){var n=t/7|2;e-=(25*n-10)*n-55,t>=7&&(e-=36)}return e},M=function(t,e){for(var n=2;-2<=n;n--)for(var r=2;-2<=r;r--)B(t+r,e+n,1!=l(c(r),c(n)))},A=function(t,e){for(var n=4;-4<=n;n--)for(var r=4;-4<=r;r--){var i=l(c(r),c(n)),o=t+r,s=e+n;0<=o&&o<a&&0<=s&&s<a&&B(o,s,2!=i&&4!=i)}},T=function(t){for(var e=n[1]<<3|t,r=e,i=10;i--;)r=r<<1^1335*(r>>>9);var o=21522^(e<<10|r);if(o>>>15!=0)throw"Assertion error";for(i=0;i<=5;i++)B(8,i,_(o,i));for(B(8,7,_(o,6)),B(8,8,_(o,7)),B(7,8,_(o,8)),i=9;i<15;i++)B(14-i,8,_(o,i));for(i=0;i<8;i++)B(a-1-i,8,_(o,i));for(i=8;i<15;i++)B(8,a-15+i,_(o,i));B(8,a-8,1)},q=function(){for(var t=a;t--;)B(6,t,0==t%2),B(t,6,0==t%2);for(var n=function(){var t=[];if(e>1)for(var n=2+(e/7|0),r=32==e?26:2*u((a-13)/(2*n-2));n--;)t[n]=n*r+6;return t}(),r=t=n.length;r--;)for(var i=t;i--;)0==i&&0==r||0==i&&r==t-1||i==t-1&&0==r||M(n[i],n[r]);A(3,3),A(a-4,3),A(3,a-4),T(0),function(){if(!(7>e)){for(var t=e,n=12;n--;)t=t<<1^7973*(t>>>11);var r=e<<12|t;if(n=18,r>>>18!=0)throw"Assertion error";for(;n--;){var i=a-11+n%3,o=n/3|0,l=_(r,n);B(i,o,l),B(o,i,l)}}}()},D=function(t){for(var e=[],n=(t=encodeURI(t),0);n<t.length;n++)"%"!=t.charAt(n)?e.push(t.charCodeAt(n)):(e.push(parseInt(t.substr(n+1,2),16)),n+=2);return e},H=function(t,e){return(k(t)/8|0)-m[e[0]][t]*h[e[0]][t]},B=function(t,e,n){i[e][t]=n?1:0,o[e][t]=1},E=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var a=r[n];w(a,8,e)}return{modeBits:4,numBitsCharCount:[8,16,16],numChars:t.length,bitData:e}},L=function(t){if(!d.test(t))throw"String contains non-numeric characters";for(var e=[],n=0;n<t.length;){var r=s(t.length-n,3);w(parseInt(t.substr(n,r),10),3*r+1,e),n+=r}return{modeBits:1,numBitsCharCount:[10,12,14],numChars:t.length,bitData:e}},R=function(t){if(!v.test(t))throw"String contains unencodable characters in alphanumeric mode";var e,n=[];for(e=0;e+2<=t.length;e+=2){var r=45*f.indexOf(t.charAt(e));r+=f.indexOf(t.charAt(e+1)),w(r,11,n)}return e<t.length&&w(f.indexOf(t.charAt(e)),6,n),{modeBits:2,numBitsCharCount:[9,11,13],numChars:t.length,bitData:n}},N=function(t,e,n,r){var a=function(t){return""==t?[]:d.test(t)?[L(t)]:v.test(t)?[R(t)]:[E(D(t))]}(t);return I(a,e,n,r)},z=function(t,l,s,c){n=l,r=c;for(var u=a=4*(e=t)+17;u--;)i[u]=[],o[u]=[];if(q(),function(t){for(var e=0,n=1,r=a-1,l=r;l>0;l-=2){6==l&&--l;for(var s=0>(n=-n)?r:0,c=0;c<a;++c){for(var u=l;u>l-2;--u)o[s][u]||(i[s][u]=_(t[e>>>3],7-(7&e)),++e);s+=n}}}(function(t){if(t.length!=H(e,n))throw"Invalid argument";for(var r=h[n[0]][e],a=m[n[0]][e],i=k(e)/8|0,o=r-i%r,l=i/r|0,s=[],c=function(t){var e=1,n=[];n[t-1]=1;for(var r=0;r<t;r++){for(var a=0;a<t;a++)n[a]=g(n[a],e)^n[a+1];e=g(e,2)}return n}(a),u=0,d=0;u<r;u++){var v=t.slice(d,d+l-a+(u<o?0:1));d+=v.length;var f=b(v,c);u<o&&v.push(0),s.push(v.concat(f))}var p=[];for(u=0;u<s[0].length;u++)for(var $=0;$<s.length;$++)(u!=l-a||$>=o)&&p.push(s[$][u]);return p}(s)),0>r){var d=1e9;for(u=8;u--;){$(u),T(u);var v=y();d>v&&(d=v,r=u),$(u)}}$(r),T(r),o=[]},I=function(t,e,n,r,a,i){if(void 0===a&&(a=1),void 0===i&&(i=40),void 0===r&&(r=-1),void 0===n&&(n=!0),!(1<=a&&a<=i&&i<=40)||r<-1||r>7)throw"Invalid value";for(var o=[],l=236,c=[],u=a;;){var d=C(t,u);if(d<=8*H(u,e))break;if(u>=i)throw"Data too long";u++}if(n)for(var v=(f=[p.H,p.Q,p.M]).length;v--;)d<=8*H(u,f[v])&&(e=f[v]);for(var f=0;f<t.length;f++){var m=t[f];w(m.modeBits,4,o),w(m.numChars,x(m,u),o);for(var h=0,g=m.bitData;h<g.length;h++)o.push(g[h])}if(o.length!=d)throw"Assertion error";var b=8*H(u,e);if(o.length>b)throw"Assertion error";if(w(0,s(4,b-o.length),o),w(0,(8-o.length%8)%8,o),o.length%8!=0)throw"Assertion error";for(;o.length<b;)w(l,8,o),l^=253;for(v=o.length;v--;)c[v>>>3]|=o[v]<<7-(7&v);return z(u,e,c,r)};return function(){function e(t){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(t)}function n(t,e){for(var n in t=document.createElementNS(v,t),e||{})t.setAttribute(n,e[n]);return t}var r,o,l,s,u,d,v="http://www.w3.org/2000/svg",f="",m="string"==typeof t?{msg:t}:t||{},h=m.pal||["#000"],g=c(m.dim)||256,b=[1,0,0,1,d=(d=c(m.pad))>-1?d:4,d],$=e($=h[0])?$:"#000",y=e(y=h[1])?y:0,w=m.vrb?0:1;for(N(m.msg||"",p[m.ecl]||p.M,0==m.ecb?0:1,m.mtx),u=a+2*d,l=a;l--;)for(s=0,o=a;o--;)i[l][o]&&(w?(s++,i[l][o-1]||(f+="M"+o+","+l+"h"+s+"v1h-"+s+"v-1z",s=0)):f+="M"+o+","+l+"h1v1h-1v-1z");return r=n("svg",{viewBox:[0,0,u,u].join(" "),width:g,height:g,fill:$,"shape-rendering":"crispEdges",xmlns:v,version:"1.1"}),y&&r.appendChild(n("path",{fill:y,d:"M0,0V"+u+"H"+u+"V0H0Z"})),r.appendChild(n("path",{transform:"matrix("+b+")",d:f})),r}()}class e{constructor(){}build(t){return this.core=t,this}onEnable(){}onDisable(){}createToolbar(){return null}createCommands(){return null}createRenderer(){return null}}class n extends e{constructor(){super(...arguments),this.detail={icon:"https://dioxide-cn.ink/upload/gravity-logo.png",name:"Gravity主题渲染",author:"DioxideCN",version:"1.0.0",description:"嵌入Gravity主题的自定义DOM的显示支持",github:"https://github.com/DioxideCN/plugin-lucence-for-halo",external:{style:["/themes/theme-gravity/assets/libs/custom-dom/dom.custom.css"]}}}onEnable(){console.log("'Theme Gravity Custom DOM' extension has been loaded successfully...")}onDisable(){console.log("Extension has been disabled...")}createToolbar(){return null}createCommands(){return null}createRenderer(){return[{name:"gravity",desc:"渲染Gravity主题的自定义Dom",components:this.createRenderRule()}]}createRenderRule(){return{folder:{icon:"fa-solid fa-sort-down",desc:"折叠块",allowContent:!0,allowContentHTML:!0,attributes:[{$formkit:"text",name:"title",label:"标题",validation:"required"},{$formkit:"radio",name:"expand",label:"展开",help:"是否默认为展开状态",value:!0,validation:"required",options:[{label:"展开",value:!0},{label:"折叠",value:!1}]}],render:function(t){const e=t.getContent(),n=document.createElement("div");return n.className="tool-expand",n.innerHTML=`\n                    <div class="tool-expand__title" tabindex="0">\n                        <i class="tool-expand__expander${t.get("expand",!1)?"":"tool-expand__rotate"}"><svg t="1690103390423" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path d="M544.907636 649.774545l228.957091-229.003636a46.545455 46.545455 0 0 0-32.907636-79.429818H283.042909a46.545455 46.545455 0 0 0-32.907636 79.453091l228.957091 228.957091a46.545455 46.545455 0 0 0 65.815272 0z" fill="#999"></path></svg></i>\n                        <div class="tool-expand__content${t.get("expand",!1)?"":"tool-expand__close"}">\n                            ${e}\n                        </div>\n                    </div>\n                    <div class="tool-expand__toolbar">\n                        <div class="toolbar__item"><span data-rel="${t.get("title","标题")}"></span></div>\n                    </div>`,n}},rainbow:{icon:"fa-solid fa-rainbow",desc:"彩虹虚线",attributes:[{$formkit:"color",name:"begin",label:"起始颜色",validation:"required"},{$formkit:"color",name:"end",label:"结束颜色",validation:"required"}],render:function(t){const e=t.get("begin","#ff6c6c"),n=t.get("end","#1989fa"),r=document.createElement("span");return r.className="tool_dotted",r.style.backgroundImage=`repeating-linear-gradient(-45deg, ${e} 0, ${e} 20%, transparent 0, transparent 25%, ${n} 0, ${n} 45%, transparent 0, transparent 50%)`,r}},centerTitle:{icon:"fa-solid fa-align-center",desc:"居中标题",allowContent:!0,render:function(t){const e=document.createElement("span");return e.className="tool_mtitle",e.innerHTML=`<span class="tool_mtitle__text">${t.getContent()}</span>`,e}},progressBar:{icon:"fa-solid fa-bars-progress",desc:"进度条",attributes:[{$formkit:"number",name:"percentage",label:"进度条百分比",max:100,min:0,validation:"required"},{$formkit:"color",name:"color",label:"进度条颜色",validation:"required"}],render:function(t){const e=t.get("percentage",0),n=t.get("color","#ff6c6c"),r=document.createElement("span");return r.className="tool_progress",r.innerHTML=`\n                    <div class="tool_progress__strip">\n                        <div class="tool_progress__strip-percent" style="width: ${e}; background: ${n};"></div>\n                    </div>\n                    <div class="tool_progress__percentage">${e}</div>`,r}},bilibili:{icon:"fa-brands fa-bilibili",desc:"Bilibili视频",attributes:[{$formkit:"text",name:"bvid",label:"视频的BVID号",validation:"required"},{$formkit:"number",name:"page",label:"集数",min:1,value:1,validation:"required",help:"仅对有多集的视频有效，默认为1"},{$formkit:"number",name:"width",label:"宽度",max:100,min:1,value:100,validation:"required",help:"1-100间的数字，单位为百分比"},{$formkit:"number",name:"height",label:"高度",min:150,value:250,validation:"required",help:"数字，单位为像素"},{$formkit:"radio",name:"autoplay",label:"自动播放",help:"页面加载后是否自动播放",value:0,validation:"required",options:[{label:"是",value:1},{label:"否",value:0}]}],render:function(t){const e=t.get("bvid",""),n=t.get("page",1),r=t.get("width",100),a=t.get("height",250),i=t.get("autoplay",0),o=document.createElement("iframe");return o.setAttribute("allowfullscreen","true"),o.setAttribute("scrolling","no"),o.setAttribute("border","0"),o.setAttribute("frameborder","no"),o.setAttribute("framespacing","0"),o.setAttribute("class","tool_vplayer"),o.setAttribute("src",`//player.bilibili.com/player.html?bvid=${e}&page=${n}&autoplay=${i}`),o.setAttribute("style",`width:${r}%; height:${a}px;`),o}},activity:{icon:"fa-solid fa-calendar-days",desc:"活动标签",allowContent:!0,attributes:[{$formkit:"datetime-local",name:"startTime",label:"开始时间",validation:"required"},{$formkit:"datetime-local",name:"endTime",label:"结束时间",validation:"required"},{$formkit:"text",name:"host",label:"主办方",validation:"required"},{$formkit:"text",name:"pr",label:"举办省份",validation:"required"},{$formkit:"text",name:"loc",label:"具体位置",validation:"required"},{$formkit:"text",name:"url",label:"官方介绍链接",validation:"required|url"}],render:function(e){function n(t){const e=new Date(t);return[`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`,`${0===e.getHours()?"00":e.getHours()}:${0===e.getMinutes()?"00":e.getMinutes()}`]}const r=e.getContent(),[a,i]=n(e.get("startTime","1970-01-01T00:00")),[o,l]=n(e.get("endTime","1970-01-01T00:00")),s=e.get("host","主办方"),c=e.get("pr","省份"),u=e.get("loc","位置"),d=e.get("url","/"),v=t({msg:d,pad:0}),f=document.createElement("div");return f.className="activity-ticket",f.innerHTML=`\n                        <div class="activity-ticket--column activity-ticket--left">\n                            ${v.outerHTML}\n                        </div>\n                        <div class="activity-ticket--split">\n                            <div class="circle--merged top-merge"></div>\n                            <div class="circle--merged bottom-merge"></div>\n                        </div>\n                        <div class="activity-ticket--column activity-ticket--right">\n                            <div class="activity-content">\n                                ${r}\n                            </div>\n                            <div class="activity-ticket--detail">\n                            <div class="activity-detail--column">\n                                <span>${a}</span>\n                                <span>${i}</span>\n                            </div>\n                            <div class="activity-detail--middle">\n                                <div class="activity-detail--linear_spilt"></div>\n                                <div class="activity-detail--time_icon">\n                                <svg t="1708247093671" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7901" width="20" height="20"><path d="M804.693333 273.948444l38.769778-38.741333a28.444444 28.444444 0 0 1 40.220445 0l4.636444 4.636445a28.444444 28.444444 0 0 1 0 40.248888l-42.353778 42.353778a410.595556 410.595556 0 0 1 78.478222 242.062222c0 227.783111-184.661333 412.444444-412.444444 412.444445s-412.444444-184.661333-412.444444-412.444445C99.555556 346.282667 269.027556 167.651556 483.555556 153.031111V101.205333h-19.143112a28.444444 28.444444 0 1 1 0-56.888889h95.175112a28.444444 28.444444 0 1 1 0 56.888889H540.444444V153.031111a411.136 411.136 0 0 1 264.248889 120.917333zM483.555556 504.519111a95.232 95.232 0 0 0 28.444444 186.026667 95.175111 95.175111 0 0 0 28.444444-186.026667v-131.128889a28.444444 28.444444 0 1 0-56.888888 0v131.128889z m28.444444 415.573333c196.380444 0 355.555556-159.203556 355.555556-355.555555 0-196.380444-159.175111-355.555556-355.555556-355.555556s-355.555556 159.175111-355.555556 355.555556c0 196.352 159.175111 355.555556 355.555556 355.555555z m0-28.444444c-180.650667 0-327.111111-146.488889-327.111111-327.111111 0-180.679111 146.460444-327.111111 327.111111-327.111111s327.111111 146.432 327.111111 327.111111c0 180.622222-146.460444 327.111111-327.111111 327.111111z m0-257.991111a38.286222 38.286222 0 1 1 0-76.572445 38.286222 38.286222 0 0 1 0 76.600889z" fill="var(--font-sub-color)" p-id="7902"></path></svg>\n                                </div>\n                                <div class="activity-detail--linear_spilt"></div>\n                            </div>\n                            <div class="activity-detail--column">\n                                <span>${o}</span>\n                                <span>${l}</span>\n                            </div>\n                            </div>\n                            <div class="activity-feature">\n                            <div class="activity-feature--each activity-feature--host">\n                                <span>HOST</span>\n                                <span>${s}</span>\n                            </div>\n                            <div class="activity-feature--each activity-feature--pr">\n                                <span>PR</span>\n                                <span>${c}</span>\n                            </div>\n                            <div class="activity-feature--each activity-feature--loc">\n                                <span>LOC</span>\n                                <span>${u}</span>\n                            </div>\n                            <div class="activity-feature--each activity-feature--url">\n                                <span>URL</span>\n                                <span><a href="${d}" target="_blank">官方介绍</a></span>\n                            </div>\n                            </div>\n                        </div>`,f}}}}}export{n as default};
